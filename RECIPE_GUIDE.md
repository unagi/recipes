# レシピ作成ガイド

このドキュメントは、AIエージェントがレシピを作成・編集する際のコアガイドです。

---

## レシピ追加の手順

### 1. 情報収集
- 外部ソース（Cookpadなど）のURLまたはテキストを確認
- レシピ名、材料、手順、調理時間を抽出

### 2. recipeTypeの決定
- 下記のrecipeType選択基準を参照して決定
- `dish`か`ingredient`かで必須フィールドが変わる

### 3. ファイル作成
- ファイル名: `src/content/recipes/{kebab-case}.md`
- 下記のファイル命名規則に従う

### 4. frontmatterの記述
- すべての必須フィールドを記入
- 下記の必須フィールドセクションを参照
- 任意フィールドは [RECIPE_WRITING_TIPS.md](./RECIPE_WRITING_TIPS.md) を参照

### 5. Markdown本文の記述
- 最低限「## レシピのポイント」セクションは含める
- 詳細は [RECIPE_WRITING_TIPS.md](./RECIPE_WRITING_TIPS.md) を参照

### 6. ビルド確認
```bash
npm run build
```
- エラーが出た場合は [RECIPE_WRITING_TIPS.md](./RECIPE_WRITING_TIPS.md) のトラブルシューティングを参照

### 7. テスト実行（該当する場合）
```bash
npm run test:run
```

---

## ファイル命名規則

### 基本ルール
- **ケバブケース（kebab-case）を使用**
- **英語表記**
- **説明的で検索しやすい名前**
- **最大3-4単語程度**

### 命名例

| レシピ名 | ファイル名 | 理由 |
|---------|-----------|------|
| 焦がしたまねぎのシンプルパスタ | `caramelized-onion-pasta.md` | 主要な特徴を表現 |
| スパイスから作るスープカレー | `spice-soup-curry.md` | 特徴（スパイス）+ 料理名 |
| イージースモーカーでつくる即席ベーコン | `easy-smoker-bacon.md` | 調理法 + 食材名 |
| 基本のトマトソース | `basic-tomato-sauce.md` | レベル + 食材名 |
| 鶏がらスープ | `chicken-stock.md` | 英語標準名 |
| 自家製マヨネーズ | `homemade-mayonnaise.md` | 修飾語 + 食材名 |

### 避けるべき命名
- ❌ `recipe1.md` - 説明的でない
- ❌ `焦がしたまねぎパスタ.md` - 日本語
- ❌ `caramelized_onion_pasta.md` - スネークケース
- ❌ `CaramelizedOnionPasta.md` - パスカルケース

---

## recipeType選択基準

### フローチャート

```
そのまま食べられる完成した料理か？
  ├─ YES → dish
  └─ NO  → 他の料理の材料・調味料として使うか？
            ├─ YES → 以下から選択
            │        - ingredient（加工食材：ベーコン、チャーシュー等）
            │        - sauce（ソース：トマトソース、ホワイトソース等）
            │        - stock（出汁：鶏がらスープ、コンソメ等）
            │        - condiment（調味料：自家製マヨネーズ、ドレッシング等）
            │        - preserve（保存食：ジャム、ピクルス等）
            └─ NO  → dish（まずは食べられる料理なので）
```

### 具体的な選択基準

#### `dish` - 料理
- **定義**: そのまま食卓に出せる完成した料理
- **必須フィールド**: `servings`（人数）
- **例**: パスタ、カレー、サラダ、スープ、メインディッシュ

#### `ingredient` - 加工食材
- **定義**: 他の料理の材料として使う加工食品
- **任意フィールド**: `yield`（できあがり量）
- **例**: ベーコン、チャーシュー、燻製肉、塩麹、発酵食品

#### `sauce` - ソース
- **定義**: 料理にかける・和える液状の調味料
- **任意フィールド**: `yield`（できあがり量）
- **例**: トマトソース、ホワイトソース、デミグラスソース、タレ

#### `stock` - 出汁・スープベース
- **定義**: 料理のベースとなる液体
- **任意フィールド**: `yield`（できあがり量）
- **例**: 鶏がらスープ、野菜スープ、コンソメ、だし汁

#### `condiment` - 調味料
- **定義**: 少量使う調味料・ドレッシング
- **任意フィールド**: `yield`（できあがり量）
- **例**: 自家製マヨネーズ、ドレッシング、香辛料ミックス

#### `preserve` - 保存食
- **定義**: 長期保存を目的とした加工食品
- **任意フィールド**: `yield`（できあがり量）
- **例**: ジャム、ピクルス、コンポート、マリネ

### 判断に迷うケース

| ケース | recipeType | 理由 |
|--------|-----------|------|
| ハンバーグ（単体で食べる） | `dish` | 完成した料理 |
| ミートソース | `sauce` | パスタにかける前提 |
| ラーメンスープ | `stock` | 麺料理のベース |
| チャーシュー（ラーメン用） | `ingredient` | トッピング材料 |
| ポテトサラダ | `dish` | 単体で食べられる |
| 自家製ベーコン | `ingredient` | 他の料理の材料 |

---

## 必須フィールド

すべてのレシピで以下のフィールドが必須です。

### `title`（文字列）
- **ルール**:
  - 日本語で記述
  - 【本格】【簡単】などの接頭辞は任意
  - 最大50文字程度
- **例**:
  ```yaml
  title: "【本格】スパイスから作るスープカレー"
  title: "焦がしたまねぎのシンプルパスタ"
  ```

### `description`（文字列）
- **ルール**:
  - レシピの特徴を1-2文で説明
  - 最大150文字程度
  - 「〜です。」で終わる丁寧な文体
- **例**:
  ```yaml
  description: "旨味調味料不使用ながらも、コクのあるスープカレーです。鶏がらスープとソフリットは若干面倒ですが、冷凍保存可能です"
  ```

### `recipeType`（列挙型）
- **ルール**: 上記のrecipeType選択基準セクションに従って選択
- **選択肢**: `dish` | `ingredient` | `sauce` | `stock` | `condiment` | `preserve`

### `servings`（数値、dishのみ必須）
- **ルール**:
  - `recipeType: "dish"`の場合は必須
  - 正の整数（1人分、2人分、4人分など）
- **例**:
  ```yaml
  servings: 2
  servings: 4
  ```

### `yield`（オブジェクト、dish以外で使用）
- **ルール**:
  - `amount`（単一値）または `min`+`max`（レンジ）のいずれかが必須
  - `unit`は必須（g、ml、個、枚など）
- **単一値の例**:
  ```yaml
  yield:
    amount: 500
    unit: "ml"
  ```
- **レンジの例**（調理中の脱水・蒸発で量が変わる場合）:
  ```yaml
  yield:
    min: 375
    max: 425
    unit: "g"
  ```

### `ingredients`（配列）
- **ルール**:
  - **経口摂取するもののみ**（道具は`equipment`へ）
  - `name`: 材料名
  - `amount`: 分量（"500g"、"大さじ2"、"適量"など）
  - `group`（任意）: グループ名（材料が多い場合に使用）
- **例**:
  ```yaml
  ingredients:
    - name: "スパゲティ（1.6mm）"
      amount: "200g"
    - name: "玉ねぎ"
      amount: "1個（中サイズ）"
    - name: "クミン"
      amount: "大さじ2"
      group: "スパイス"
  ```

### `steps`（配列）
- **ルール**:
  - 調理手順を順番に記載
  - 各ステップは1文で完結させる
  - 「〜する」で終わる
- **例**:
  ```yaml
  steps:
    - "大きめの鍋にたっぷりの水を沸かし、塩を加える"
    - "にんにくを薄切りにする"
    - "フライパンにオリーブオイルとにんにくを入れて弱火で加熱する"
  ```

### `publishedDate`（日付）
- **ルール**:
  - YYYY-MM-DD形式
  - レシピ作成日を記載
- **例**:
  ```yaml
  publishedDate: 2024-01-16
  ```

---

## チェックリスト

### レシピ作成時の最終チェック

#### frontmatter
- [ ] `title`が記入されているか
- [ ] `description`が記入されているか
- [ ] `recipeType`が正しく選択されているか
- [ ] `dish`の場合、`servings`が記入されているか
- [ ] `ingredients`に最低1つ材料があるか
- [ ] 道具が`equipment`に分けられているか
- [ ] `steps`に最低1つ手順があるか
- [ ] `publishedDate`が記入されているか

#### Markdown本文
- [ ] `## レシピのポイント`セクションがあるか
- [ ] 最低1つの推奨セクション（`### コツ`など）があるか
- [ ] 必要に応じて注意事項が記載されているか

#### ビルド確認
- [ ] `npm run build`がエラーなく完了するか
- [ ] `npm run test:run`が通るか（該当する場合）

---

## 詳細ガイド

より詳細な情報は以下のドキュメントを参照してください：

### レシピ作成の詳細
- **[RECIPE_WRITING_TIPS.md](./RECIPE_WRITING_TIPS.md)** - 任意フィールド、Markdown本文構造、外部ソース抽出、よくあるケース、トラブルシューティング
- **[RECIPE_EXAMPLES.md](./RECIPE_EXAMPLES.md)** - 豊富な実例集（命名、分量表記、グループ分け等）

### スキーマとシステム
- **[SCHEMA.md](./SCHEMA.md)** - スキーマの詳細仕様とバージョン履歴
- **[AGENTS.md](./AGENTS.md)** - 開発ガイド（TDD、Git、PR作成等）
- **[src/content/config.ts](./src/content/config.ts)** - Zodスキーマ定義

### サンプル
- **[src/content/recipes/](./src/content/recipes/)** - 実際のレシピファイル例
